<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Siesta - stored procedure based ORM for php7</title>

    <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/freelancer.css" rel="stylesheet">

    <link href="css/codeformat.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-81131542-1', 'auto');
        ga('send', 'pageview');

    </script>

</head>

<body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top">Siesta</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="index.html">Overview</a>
                    </li>
                    <li class="page-scroll">
                        <a href="entities.html">Entities</a>
                    </li>
                    <li class="page-scroll">
                        <a href="relationships.html">Relationships</a>
                    </li>
                    <li class="page-scroll">
                        <a href="storedprocedure.html">Stored Procedures</a>
                    </li>
                    <li class="page-scroll">
                        <a href="driver.html">Driver</a>
                    </li>
                    <li class="page-scroll">
                        <a href="generator.html">Custom Generator</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <img class="img-responsive" src="img/profile.png" alt="">
                    <div class="intro-text">
                        <span class="name">Siesta</span>
                        <hr class="star-light">
                        <span class="skills">Stored procedure based object relational mapper for php7</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="content">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Content</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="col-lg-8 col-lg-offset-2 text-center">
                        <p>
                            <a href="#overview">Overview</a><br/>
                            <a href="#Installation">Installation</a><br/>
                            <a href="#hello">Hello World</a><br/>
                            <a href="#configuration">Console commands &amp; Configuration</a><br/>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="overview">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Overview</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="chapter">
                        <p>
                            Siesta is an object relational mapper for php7 build for performant database access implementing the active record pattern.
                            Furthermore it allows to define own plugins to generate custom coding into entity or service classes or even generate
                            additional classes like DTO. The database access is realized with stored procedures for all standard operations. Custom
                            stored procedure can be defined in xml format. Currently only drivers for for MySQL are available.<br><br>

                            Important features:<br><br>

                            <b>Code Generation</b><br>
                            Instead of writing a large generic engine with tons of code, the needed code for persistency operations
                            is generated from descriptions. Therefore the needed persistency footprint is very small, hence fast.<br><br>

                            <b>Stored Procedures insted of ad-hoc SQL</b><br>
                            Siesta relies to 100% on Stored Procedures. The generator creates all needed stored procedures directly in the database.
                            In contrast to classic ad hoc sql the stored procedures are precompiled in the database which increases performance.
                            Furthermore custom stored procedures can be defined.<br><br>

                            <b>Extensibility</b><br>
                            Code generation approaches tend to limit programmers ability to change behaviour. Therefore an
                            import design principle is to allow for extensibilty at every given point. Own generator plugins can be defined or
                            existing ones replaced or overwritten.<br><br>

                            <b>In Memory replication</b><br>
                            Siesta for MySQL allows to replicate tables with a memory engine. That means the table exist twice once with the
                            defined engine and one with the memory engine. All modifying operations are executed on both tables. Read operations
                            are only performed on the memory table.<br><br>

                            <b>Delimiting Tables / Record History</b><br>
                            Sometimes it is important to track changes to objects. Therefore Siesta allows to generate a second history table.
                            Every time the a record is changed, the changes will be stored to the history table with a valid from and valid until
                            entry.<br><br>

                            <a href="coverage/index.html">code coverage report</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Installation Section -->
    <section class="success" id="Installation">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Installation</h2>
                    <hr class="star-light">
                </div>
            </div>
            <div class="row">
                <div class="chapter">
                    <p>Installation with composer</p>
<pre class="prettyprint">
composer require gm314/siesta
</pre>
                    <p>Create configuration file with</p>
<pre class="prettyprint">
vendor/bin/siesta init
</pre>
                    <p>SSH Clone URL : git@github.com:gperler/siesta.git<br>
                        Github repository <a class="toc" href="https://github.com/gperler/siesta">https://github.com/gperler/siesta</a>
                    </p>
                </div>
            </div>
        </div>
    </section>


    <!-- Hello world  -->
    <section id="hello">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Hello World</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="chapter">
                        <p>
                            (1) After having installed Siesta run <code>vendor/bin/siesta init</code> on the command line. It will ask you for
                            database connection details and generate an initial configuration file. <br><br>
                            (2) Copy the following xml into a file called <code>hello.entity.xml</code>. And place it somewhere in your
                            project directory. The suffix .entity.xml is important, because Siesta will by default look for all files that
                            end with .entity.xml. You can change this in the config file.
                        </p>
                        <pre class="prettyprint">
    &lt;entityList&gt;

        &lt;entity name="Customer" namespace="Siesta\HelloWorld" table="Customer"&gt;
            &lt;attribute name="id" type="int" dbType="INT" primaryKey="true" required="true" autoValue="autoincrement"/&gt;
            &lt;attribute name="firstName" type="string" dbType="VARCHAR(100)"/&gt;
            &lt;attribute name="lastName" type="string" dbType="VARCHAR(100)"/&gt;

            &lt;collection name="addressList" foreignTable="Address" foreignReferenceName="customer"/&gt;
        &lt;/entity&gt;

        &lt;entity name="Address" namespace="Siesta\HelloWorld" table="Address"&gt;
            &lt;attribute name="id" type="int" dbType="INT" primaryKey="true" required="true" autoValue="autoincrement"/&gt;
            &lt;attribute name="name" type="string" dbType="VARCHAR(100)"/&gt;
            &lt;attribute name="customerId" dbName="fk_customer" type="int" dbType="INT"/&gt;

            &lt;reference name="customer" foreignTable="Customer" onDelete="cascade" onUpdate="cascade"&gt;
                &lt;referenceMapping localAttribute="customerId" foreignAttribute="id"/&gt;
            &lt;/reference&gt;
        &lt;/entity&gt;

    &lt;/entityList&gt;</pre>
                        <p>
                            (3) Run <code>vendor/bin/siesta gen</code> on the command line. This will generate 4 files in the
                        folder src/Siesta/HelloWorld. See configuration below to change this.
                            <ul>
                                <li>Customer.php this class represents the customer table with functionality like save delete</li>
                                <li>CustomerService.php this class contains management like find by primary keys</li>
                                <li>Address.php same like Customer for Address entity</li>
                                <li>AddressService.php same like CustomerService for Address entity</li>
                            </ul>
                            Below you can find an example usage of the classes.
                        </p>
                        <pre class="prettyprint">
&lt;?php

namespace test;

use Siesta\Config\Config;
use Siesta\HelloWorld\Address;
use Siesta\HelloWorld\Customer;

require_once 'vendor/autoload.php';

// will load database configuration
Config::getInstance();

// create a new Address
$address = new Address();
$address->setName("London Residence");

// create a new Customer
$customer = new Customer();
$customer->setLastName("Woon");
$customer->setFirstName("Jamie");
$customer->addToAddressList($address);

// true enables the cascading save. The customer including the address will be saved.
$customer->save(true);</pre>

                    </div>
                </div>
            </div>
        </div>
    </section>


    <section id="configuration">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Console Commands &amp; Configuration</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="chapter">

                        <h4>Init and the config file</h4>
                        <p>
                            First you should use <code>vendor/bin/siesta init</code> to create a config file. The command will aks for your database
                            connection data and test the connection. It will create a file called <code>siesta.config.json</code>. If no other
                            config file is specified Siesta will always search for this file.<br><br>

                            The config file generated consist of 3 parts. Connection, Generator and Reverse.
                        </p>
                        <pre class="prettyprint">
    {
        "connection": [
            { ... }
        ],
        "generator": {
           ...
        },
        "reverse": {
          ...
        }
    }
                            </pre>
                        <h4>Connection</h4>
                        <p>
                            Most values are self explanatory. Currently there is only a MySQL driver. The driver value points to the
                            driver class implementing the <code>Siesta\Database\Driver</code> interface. In the <code>postConnectStatementList</code> you
                            can place several statements that are executed after connection. You can even define several connections.
                            The database access methods provide an optional parameter called <code>$connectionName</code> If supplied you can
                            tell Siesta to use the specific connection. If the parameter is not set, Siesta will use the default configuration.

                        </p>
                        <pre class="prettyprint">
    {
            "name": "default",
            "driver": "Siesta\\Driver\\MySQL\\MySQLDriver",
            "host": "127.0.0.1",
            "port": 3306,
            "database": "siesta2",
            "user": "root",
            "password": "",
            "charSet": "utf8",
            "isDefault": null,
            "postConnectStatementList": []
    }</pre>
                        <h4>Generate and Generate Config</h4>
                        <p>
                            The command <code>vendor/bin/siesta gen --configFile myConfig.json</code> will scan the current working
                            directory for entity xml files and generate the PHP classes and perform database migrations. The parameter
                            --configFile is optional. If not supplied, Siesta will search for a file called siesta.config.json.<br><br>


                            The generator part describes how the generator works. <code>dropUnusedTables</code> tells siesta if not used
                            tables should be deleted or not.<br><br>

                            The <code>entityFileSuffix</code> tells Siesta for which entity files it
                            should look. By default it will scan your entire project directory and use all files that match the suffix.
                            <br><br>

                            The <code>migrationMethod</code> <code>direct</code> will update the database when running the command.
                            You can also specify the value <code>sql</code> which will put alter statements into a file in the
                            <code>migrationTargetPath</code> directory.<br><br>

                            If you do not specify table name or dbName for columns the configures strategies <code>tableNamingStrategy</code>
                            and <code>columnNamingStrategy</code> will be used to determine the names. A strategy is simply a class that
                            implements the <code>Siesta\NamingStrategy\NamingStrategy</code> interface. You can implement your own strategy.
                            Just place the class name in the configuration file and make sure your strategy is autoloaded.
                            Available strategies are
                        <ul>
                            <li>Siesta\NamingStrategy\NoTransformStrategy</li>
                            <li>Siesta\NamingStrategy\ToCamelCaseStrategy</li>
                            <li>Siesta\NamingStrategy\ToClassCamelCaseStrategy (will uppercase the first character)</li>
                            <li>TSiesta\NamingStrategy\ToUnderScoreStrategy</li>
                        </ul><br>

                        The <code>baseDir</code> will tell Siesta where to put generated classes. By default paths
                        are deriverd psr-0 compliant from the provivide namespace. Example. If the baseDir is "src"
                        and the namespace is Siesta\HelloWord the class will be stored in src/Siesta/HelloWorld directory.
                        When specifying a <code>targetPath</code> in the entity xml, the targetDirector will be
                        baseDir/targetPath.<br><br>

                        You can supply a specific <code>connectionName</code> for the generator. If none is supplied the default
                        connection will be used for generating/migrating<br><br>

                        The <code>genericGeneratorConfiguration</code> allows you to totally change the way that Siesta is
                        generating entities and Service class. If you want to add your own code generator plugins or
                        remove mehtods that you don't like or just enhance them, you can copy the default configuration,
                        adapt the generators and have it your style. See the <a href="generator.html">Generator</a> section for
                        more details.


                        </p>
                        <pre class="prettyprint">
    {
        "dropUnusedTables": true,
        "entityFileSuffix": ".entity.xml",
        "migrationMethod": "direct",
        "migrationTargetPath": "migration",
        "tableNamingStrategy": "Siesta\\NamingStrategy\\ToUnderScoreStrategy",
        "columnNamingStrategy": "Siesta\\NamingStrategy\\ToUnderScoreStrategy",
        "baseDir": "src",
        "connectionName": null,
        "genericGeneratorConfiguration": null
    }</pre>
                        <h4>Reverse engineer Command &amp; Configuration</h4>
                        <p>
                            The console command <code>vendor/bin/siesta gen --configFile myConfig.json</code> will reverse engineer
                            an existing database schema and create XML files. The --configFile parameter is optional.
                            <br><br>
                            The third reverse section in the config file describes how an existing schema is reverse engineered.
                            The <code>targetPath</code> specifies where the xml should be stored. You can either place all information in one file
                            (<code>singleFile</code> true) or create an XML file for every table. Therefore Siesta either uses the <code>targetFile</code> option or
                            the <code>entityFileSuffix</code>.<br><br>

                            <code>classNamingStrategy</code> and <code>attributeNamingStrategy</code> determine how Classes and
                            attributes should be called based on the name of the table and the column.

                            Available strategies are.
                            <ul>
                                <li>Siesta\NamingStrategy\NoTransformStrategy</li>
                                <li>Siesta\NamingStrategy\ToCamelCaseStrategy</li>
                                <li>Siesta\NamingStrategy\ToClassCamelCaseStrategy (will uppercase the first character)</li>
                                <li>TSiesta\NamingStrategy\ToUnderScoreStrategy</li>
                            </ul>
                            You can also create your own strategy by creating a class that implements the
                            <code>Siesta\NamingStrategy\NamingStrategy</code> interface.<br><br>

                            <code>defaultNamespace</code> allows you to specifiy which namespace should be used in the entity xml
                            files. The <code>connectionName</code> allows to use a specific connection defined in the connection
                            section.

                        </p>
                        <pre class="prettyprint">
    {
        "targetPath": "\/reverse",
        "singleFile": true,
        "targetFile": "Reverse.xml",
        "entityFileSuffix": ".entity.xml",
        "classNamingStrategy": "Siesta\\NamingStrategy\\ToClassCamelCaseStrategy",
        "attributeNamingStrategy": "Siesta\\NamingStrategy\\ToCamelCaseStrategy",
        "defaultNamespace": null,
        "connectionName": null
    }</pre>

                    </div>
                </div>
            </div>
        </div>
    </section>



    <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4">
                        <h3>Location</h3>
                        <p>Berlin</p>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Around the Web</h3>
                        <ul class="list-inline">
                            <li>
                                <a href="https://github.com/gperler/siesta" class="btn-social btn-outline"><i class="fa fa-fw fa-dribbble"></i></a>
                            </li>
                        </ul>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>About Siesta</h3>
                        <p>Siesta is a free to use, open source PHP ORM.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; Siesta PHP
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll visible-xs visible-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="js/classie.js"></script>
    <script src="js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/freelancer.js"></script>

</body>

</html>
